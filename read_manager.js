// not written by me, just editted minorly and commented

function m() { // literally no idea lol
    var r='',c='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'
    for ( var i = 0; i < 5; i++ ) {
      r += c.charAt(Math.floor(Math.random() * 36));
   }
   return r;
}

if (location.host != "chrome.google.com" || !location.pathname.startsWith("/webstore")) {
    location.href = "https://chrome.google.com/webstore" + m();
    //sets the website/host of the html thingy, could be done by hosting it on device but its more difficult
}

document.body = document.createElement("body");

// idk lol, I think it makes the UI accessibly or something
document.newBodyData = "<table>"
console.log(document.newBodyData)
document.newBodyData += ""

chrome.management.getAll(function(){ //gets all the stuff
    arguments[0].forEach(function(extension){ //loop to get each extension
        document.newBodyData += extension
        // document.newBodyData += "<tr id="+extension.id+">"
        /*
        if ("icons" in extension) {
            document.newBodyData += "<td><img src='"+extension.icons[0]['url']+"'/></td>"
        }    
        */
        // document.newBodyData += "<td><label class='switch'><input type='checkbox' " + (extension.enabled ? "checked" : "") + " onclick=\"toggleFunction('"+extension.id+"')\"><span class='slider round'></span></label></td>"
        // document.newBodyData += "<td>"+extension.name+"</td>"
        // document.newBodyData += "<td>"+extension.id+"</td>"
        // document.newBodyData += "<td>"+extension.installType+"</td>"
        
        // adds the name, id, type, etc, and switch to the UI
  
        document.newBodyData += "</tr>"
    });
    document.newBodyData += "</table>"
    document.body.innerHTML = document.newBodyData; // idk lol I suck at HTML
  })
  